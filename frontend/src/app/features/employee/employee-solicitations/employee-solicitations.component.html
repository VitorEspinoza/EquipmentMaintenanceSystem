<div class="p-4">
  <h2 class="text-2xl font-semibold mb-4">Solicitações</h2>

  <div class="mb-4 space-x-4">
    <label>
      <input type="radio" name="filter" [(ngModel)]="filterType" value="TODAS" (change)="applyFilter()" />
      Todas
    </label>
    <label>
      <input type="radio" name="filter" [(ngModel)]="filterType" value="HOJE" (change)="applyFilter()" />
      Hoje
    </label>
    <label>
      <input type="radio" name="filter" [(ngModel)]="filterType" value="PERÍODO" (change)="applyFilter()" />
      Período
    </label>
  </div>

  <div *ngIf="filterType === 'PERÍODO'" class="mb-4 flex gap-4 items-center">
    <input type="date" [(ngModel)]="dateStart" (change)="applyFilter()" />
    <span>até</span>
    <input type="date" [(ngModel)]="dateEnd" (change)="applyFilter()" />
  </div>

  <table mat-table [dataSource]="filteredSolicitations" class="w-full mat-elevation-z2">
    <ng-container matColumnDef="id">
      <th mat-header-cell *matHeaderCellDef>ID</th>
      <td mat-cell *matCellDef="let s">{{ s.id }}</td>
    </ng-container>

    <ng-container matColumnDef="equipment">
      <th mat-header-cell *matHeaderCellDef>Equipamento</th>
      <td mat-cell *matCellDef="let s">{{ s.equipment }}</td>
    </ng-container>

    <ng-container matColumnDef="dateTime">
      <th mat-header-cell *matHeaderCellDef>Data</th>
      <td mat-cell *matCellDef="let s">{{ s.dateTime | date: 'shortDate' }}</td>
    </ng-container>

    <ng-container matColumnDef="status">
      <th mat-header-cell *matHeaderCellDef>Status</th>
      <td mat-cell *matCellDef="let s">
        <span [ngClass]="getStatusClass(s.status)" class="px-2 py-1 rounded">
          {{ s.status }}
        </span>
      </td>
    </ng-container>

    <ng-container matColumnDef="actions">
      <th mat-header-cell *matHeaderCellDef>Ações</th>
      <td mat-cell *matCellDef="let s">
        <a *ngIf="getActionButton(s)" [routerLink]="[getActionButton(s)?.route]" class="text-blue-600 hover:underline">
          {{ getActionButton(s)?.label }}
        </a>
      </td>
    </ng-container>

    <tr mat-header-row *matHeaderRowDef="['id', 'equipment', 'dateTime', 'status', 'actions']"></tr>
    <tr mat-row *matRowDef="let row; columns: ['id', 'equipment', 'dateTime', 'status', 'actions']"></tr>
  </table>

  <p *ngIf="filteredSolicitations.length === 0" class="mt-4 text-gray-500">Nenhuma solicitação encontrada.</p>
</div>
